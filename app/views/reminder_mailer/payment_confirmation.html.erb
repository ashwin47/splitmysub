<div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; background-color: #f9f9f9;">
  <div style="background-color: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
    <div style="text-align: center; margin-bottom: 30px; background-color: #059669; color: white; padding: 20px; border-radius: 6px;">
      <h1 style="margin: 0; font-size: 26px;">âœ… Payment Confirmed!</h1>
      <p style="margin: 10px 0 0 0; font-size: 16px;">Thank you for your payment</p>
    </div>

    <p style="font-size: 16px; line-height: 1.6; color: #374151;">
      Hi <%= @user.email_address %>,
    </p>

    <p style="font-size: 16px; line-height: 1.6; color: #374151;">
      Great news! We have received and confirmed your payment for <strong><%= @project.name %></strong>.
    </p>

    <div style="background-color: #f0fdf4; padding: 25px; border-radius: 6px; margin: 25px 0; border-left: 4px solid #059669;">
      <h3 style="margin: 0 0 15px 0; color: #065f46; font-size: 18px;">âœ… Payment Details:</h3>
      <p style="margin: 8px 0; color: #065f46; font-size: 16px;"><strong>Project:</strong> <%= @project.name %></p>
      <p style="margin: 8px 0; color: #065f46; font-size: 16px;"><strong>Amount Paid:</strong> $<%= number_with_precision(@payment.amount, precision: 2) %></p>
      <p style="margin: 8px 0; color: #065f46; font-size: 16px;"><strong>Payment Date:</strong> <%= @payment.confirmation_date&.strftime("%B %d, %Y") || Date.current.strftime("%B %d, %Y") %></p>
      <p style="margin: 8px 0; color: #065f46; font-size: 16px;"><strong>Status:</strong> Confirmed</p>
    </div>

    <div style="background-color: #eff6ff; padding: 20px; border-radius: 6px; margin: 20px 0; border-left: 4px solid #2563eb;">
      <h3 style="margin: 0 0 10px 0; color: #1e40af;">ðŸ“Š Billing Cycle Status:</h3>
      <p style="margin: 5px 0; color: #1e40af;"><strong>Due Date:</strong> <%= @billing_cycle.due_date.strftime("%B %d, %Y") %></p>
      <p style="margin: 5px 0; color: #1e40af;"><strong>Total Amount Due:</strong> $<%= number_with_precision(@billing_cycle.total_amount, precision: 2) %></p>
      <p style="margin: 5px 0; color: #1e40af;"><strong>Total Paid:</strong> $<%= number_with_precision(@billing_cycle.total_paid, precision: 2) %></p>
      <% if @billing_cycle.fully_paid? %>
        <p style="margin: 10px 0 5px 0; color: #059669; font-weight: bold;">âœ… This billing cycle is now fully paid!</p>
      <% else %>
        <p style="margin: 10px 0 5px 0; color: #1e40af;"><strong>Remaining:</strong> $<%= number_with_precision(@billing_cycle.amount_remaining, precision: 2) %></p>
      <% end %>
    </div>

    <p style="font-size: 16px; line-height: 1.6; color: #374151;">
      Your payment has been successfully processed and recorded. You will no longer receive payment reminders for this billing cycle.
    </p>

    <% if @billing_cycle.fully_paid? %>
      <div style="background-color: #f0fdf4; padding: 20px; border-radius: 6px; margin: 20px 0; text-align: center;">
        <p style="font-size: 18px; color: #059669; font-weight: bold; margin: 0;">
          ðŸŽ‰ Congratulations! This billing cycle is now complete.
        </p>
      </div>
    <% end %>

    <p style="font-size: 16px; line-height: 1.6; color: #374151;">
      Thank you for your continued participation in <%= @project.name %>. If you have any questions about this payment or the project, please don't hesitate to contact the project organizer.
    </p>

    <div style="text-align: center; margin: 30px 0; padding: 20px; background-color: #f3f4f6; border-radius: 6px;">
      <p style="margin: 0; color: #374151; font-size: 14px;">
        <strong>Questions?</strong> Contact the project organizer: 
        <a href="mailto:<%= @project.user.email_address %>" style="color: #2563eb;"><%= @project.user.email_address %></a>
      </p>
    </div>

    <div style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #e5e7eb; text-align: center;">
      <p style="font-size: 14px; color: #6b7280; margin: 0;">
        This is an automated confirmation email for your payment to <%= @project.name %>.
      </p>
    </div>
  </div>
</div> 